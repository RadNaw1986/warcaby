{"ast":null,"code":"'use strict';\n\n//const PLUGIN_NAME = 'mysql_native_password';\nconst auth41 = require('../auth_41.js');\nmodule.exports = pluginOptions => _ref => {\n  let {\n    connection,\n    command\n  } = _ref;\n  const password = command.password || pluginOptions.password || connection.config.password;\n  const passwordSha1 = command.passwordSha1 || pluginOptions.passwordSha1 || connection.config.passwordSha1;\n  return data => {\n    const authPluginData1 = data.slice(0, 8);\n    const authPluginData2 = data.slice(8, 20);\n    let authToken;\n    if (passwordSha1) {\n      authToken = auth41.calculateTokenFromPasswordSha(passwordSha1, authPluginData1, authPluginData2);\n    } else {\n      authToken = auth41.calculateToken(password, authPluginData1, authPluginData2);\n    }\n    return authToken;\n  };\n};","map":{"version":3,"names":["auth41","require","module","exports","pluginOptions","_ref","connection","command","password","config","passwordSha1","data","authPluginData1","slice","authPluginData2","authToken","calculateTokenFromPasswordSha","calculateToken"],"sources":["G:/PROGRAMY/Node.js/warcaby/frontend/node_modules/mysql2/lib/auth_plugins/mysql_native_password.js"],"sourcesContent":["'use strict';\n\n//const PLUGIN_NAME = 'mysql_native_password';\nconst auth41 = require('../auth_41.js');\n\nmodule.exports = pluginOptions => ({ connection, command }) => {\n  const password =\n    command.password || pluginOptions.password || connection.config.password;\n  const passwordSha1 =\n    command.passwordSha1 ||\n    pluginOptions.passwordSha1 ||\n    connection.config.passwordSha1;\n  return data => {\n    const authPluginData1 = data.slice(0, 8);\n    const authPluginData2 = data.slice(8, 20);\n    let authToken;\n    if (passwordSha1) {\n      authToken = auth41.calculateTokenFromPasswordSha(\n        passwordSha1,\n        authPluginData1,\n        authPluginData2\n      );\n    } else {\n      authToken = auth41.calculateToken(\n        password,\n        authPluginData1,\n        authPluginData2\n      );\n    }\n    return authToken;\n  };\n};\n"],"mappings":"AAAA,YAAY;;AAEZ;AACA,MAAMA,MAAM,GAAGC,OAAO,CAAC,eAAe,CAAC;AAEvCC,MAAM,CAACC,OAAO,GAAGC,aAAa,IAAIC,IAAA,IAA6B;EAAA,IAA5B;IAAEC,UAAU;IAAEC;EAAQ,CAAC,GAAAF,IAAA;EACxD,MAAMG,QAAQ,GACZD,OAAO,CAACC,QAAQ,IAAIJ,aAAa,CAACI,QAAQ,IAAIF,UAAU,CAACG,MAAM,CAACD,QAAQ;EAC1E,MAAME,YAAY,GAChBH,OAAO,CAACG,YAAY,IACpBN,aAAa,CAACM,YAAY,IAC1BJ,UAAU,CAACG,MAAM,CAACC,YAAY;EAChC,OAAOC,IAAI,IAAI;IACb,MAAMC,eAAe,GAAGD,IAAI,CAACE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IACxC,MAAMC,eAAe,GAAGH,IAAI,CAACE,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;IACzC,IAAIE,SAAS;IACb,IAAIL,YAAY,EAAE;MAChBK,SAAS,GAAGf,MAAM,CAACgB,6BAA6B,CAC9CN,YAAY,EACZE,eAAe,EACfE,eACF,CAAC;IACH,CAAC,MAAM;MACLC,SAAS,GAAGf,MAAM,CAACiB,cAAc,CAC/BT,QAAQ,EACRI,eAAe,EACfE,eACF,CAAC;IACH;IACA,OAAOC,SAAS;EAClB,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}